<!DOCTYPE html>
<html lang="en">
<head>
  <title>Game of Pong on Darlingjs javascript engine</title>
  <link rel="shortcut icon" href="../../images/logo-oldschool.ico">
  <meta name="description" content="Darlingjs : Entity, Component, System based javascript game engine. With dependency injections and modular architecture. Inspired by Ash, AngularJS and CraftyJS." />
  <link rel="stylesheet" type="text/css" media="screen" href="css/main.css">
  <link rel="image_src" href="https://lh5.googleusercontent.com/-80qp7uh3EZM/UfUXEVNq6TI/AAAAAAAAfoo/twveW1uDI2A/s0/2013-07-28_15-05-19.png" />
  <meta property="og:image" content="https://lh5.googleusercontent.com/-80qp7uh3EZM/UfUXEVNq6TI/AAAAAAAAfoo/twveW1uDI2A/s0/2013-07-28_15-05-19.png" />
  <meta property="engine:author"    content="http://about.me/hyzhak" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes" />
</head>
<body>
<article class="section">
  <h1><a href="/#showcases">Darlingjs</a> : Game of Pong</h1>

  <div id="result" class="game">
    <iframe id="sandbox" src="game/index.html" width="100%" height="300" frameborder="0" scrolling="0" ></iframe>
  </div>

</article>

<article class="section">
  <div>Sources: <a href="https://github.com/darlingjs/darlingjs-examples/tree/master/game-of-pong">on github</a></div>
  <div style="position: absolute;right: 0;top:0">
    <iframe src="http://ghbtns.com/github-btn.html?user=darlingjs&repo=darlingjs-examples&type=watch&count=true&size=large"
            allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30"></iframe>
  </div>
</article>

<article id="social" class="section">
  <!-- Social buttons -->
  <div class="center add-a-little-space-up-and-down">
    <div style="width: 200px;" class="g-plusone" data-size="medium" data-annotation="inline" data-width="200"></div>
    <div style="width: 200px; display: inline-block;">
      <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en">Tweet</a>
    </div>
    <div style="width: 200px;" class="fb-like" data-href="http://www.facebook.com/Darlingjs" data-send="false" data-layout="button_count" data-width="200" data-show-faces="true" data-font="arial" data-colorscheme="light"></div>
  </div>
</article>

<!-- Comments by Disqus -->

<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'darlingjs'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!--Social Code -->

<!-- G+ -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!-- Twitter Follow.me -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=460658387336825";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!--
<div id="editor">function foo(items) {
  var x = "All this is syntax highlighted";
  return x;
  }
</div>

<script src="bower_components/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

<script>
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/monokai");
  editor.getSession().setMode("ace/mode/javascript");
</script>
<script>
  window.tryIt = function() {
    $('.spec-runner,.runner-notice').removeClass('passing failing').html($('.loading.template').html());
    $('#sandbox').remove();
    $($('.sandbox.template').html()).appendTo('body').load(function() {
      $('.spec-runner').html('');
      Sandbox().runSpecs();
    });
  };

  //Define the little iframe sandbox
  window.Sandbox = function(){
    var self = $('#sandbox').get(0).contentWindow;

    self.runSpecs = function() {
      hideErrors();
      self.jasmine.getEnv().addReporter(new self.jasmine.TrivialReporter({
        location: window.document.location,
        body: $('.spec-runner')[0]
      }));
      self.jasmine.getEnv().addReporter(new StylishReporter());
      editors.each(function(editor) {
        self.execute(editor);
      });
      self.jasmine.getEnv().execute();
    };
    self.execute = function(editor) {
      var script = editor.getSession().getValue();
      localStorage[editor.name] = script;
      try {
        self.eval(script);
      } catch(javaScriptError) {
        //Well, maybe it's just coffeescript.
        try {
          self.eval(CoffeeScript.compile(script, { bare: true }));
          editors.setMode('coffee');
        } catch(coffeeError) {
          var fullError = 'JavaScript Parse Error: '+javaScriptError+
              '<br/>'+
              'CoffeeScript Compile Error: '+coffeeError;
          showError(editor.name,fullError);
          throw fullError.replace(/\<br\/\>/g,"\n");
        }
      }
    };

    var hideErrors = function() {
      $('.flash').html('').hide();
      $('.error, .runner-wrap').removeClass('error');
    };

    var showError = function(name,fullError) {
      $('.flash').fadeIn().append("<li>Uh oh, it looks like your JavaScript "+(name === 'specs' ? 'specs have' : 'source has')+" a parse error!"+
          "<br/><br/>"+
          "<code>"+fullError+"</code>"+
          "</li>");
      $('.runner-wrap, #'+name).addClass('error');
    };

    return self;
  };

  window.templates = {
    stillDefault: function(editor) {
      return this.getDefault(editor.name) === editor.getSession().getValue();
    },
    getDefault: function(name) {
      return $.trim($('#default-'+name).text());
    },
    renderDefault: function(name) {
      var script = this.getDefault(name);
      if((localStorage[name] && script !== localStorage[name])) {
        $('.clear-saved').show().css('display','inline-block');
      }
      editors.get(name).getSession().setValue(localStorage[name] || script);
    },
    init: function() {
      _(editors.names).each(function(name) {
        templates.renderDefault(name);
      });
    },
    goCoffee: function() {
      editors.setMode('coffee');
      editors.each(function(editor) {
        var coffee = Js2coffee.build(editor.getSession().getValue());
        editor.getSession().setValue(coffee);
      });
    },
    goJavaScript: function() {
      editors.setMode('javascript');
      editors.each(function(editor) {
        var js = CoffeeScript.compile(editor.getSession().getValue(), { bare: "on" });
        editor.getSession().setValue(js);
      });
    }
  };

  $.fn.codeBox = function() {
    var $this = $(this);
    var editor = ace.edit($this.attr('id'));
    editor.name = $this.attr('id');
    editor.setTheme("ace/theme/textmate");
    editor.getSession().setTabSize(2);
    editor.getSession().setUseSoftTabs(true);
    editor.renderer.setShowPrintMargin(false);
    editor.switchMode = function(name) {
      localStorage['editorMode'] = name;
      $('#mode-select').val(name);
      var mode = require("ace/mode/"+name).Mode;
      editor.getSession().setMode(new mode());
    };
    editor.switchMode(localStorage['editorMode'] || 'javascript');
    $this.data('editor',editor);
    return $this;
  };

  var editors = {
    names: ['specs','src'],
    get: function(name) {
      return $('#'+name).data('editor');
    },
    getMode: function() {
      return $('#mode-select').val();
    },
    setMode: function(name) {
      $('#mode-select').val(name).trigger('change');
    },
    each: function(f) {
      return _(editors.names).each(function(name,i) {
        f(editors.get(name),i);
      });
    },
    all: function(f) {
      return _(editors.names).all(function(name,i) {
        return f(editors.get(name),i);
      });
    }
  };

  //Eventy stuff
  $('html, body').add(document.body).keydown(function(e){
    if(e.which === 13 && (e.ctrlKey || e.metaKey)) {
      e.preventDefault();
      tryIt();
    }
  });
  $('#mode-select').live('change',function(e) {
    e.preventDefault();
    var $sel = $(this);
    editors.each(function(editor) {
      editor.switchMode($sel.val());
    });
  });
  var clicker = function(selector,action) {
    $(selector).live('click',function(e) {
      e.preventDefault();
      action.apply(this,[e]);
    });
  };
  clicker('.try-it.button',function() {
    tryIt();
  });
  clicker('.button.insert',function() {
    editors.get('specs').insert($(this).data(editors.getMode()+'-snippet'));
  });
  clicker('.clear-saved',function() {
    _(editors.names).each(function(name) {
      delete localStorage[name];
    });
    $(this).hide();
    editors.setMode('javascript');
    templates.init();
  });
  clicker('.coffee.button',function() {
    templates.goCoffee();
  });
  clicker('.coffee2js.button',function(){
    templates.goJavaScript();
  });
  clicker('.scroll-to-results',function() {
    $('#__jasmine_TrivialReporter_showPassed__').attr('checked','checked').trigger('click').attr('checked','checked');
    window.scrollTo(0,$('.jasmine_reporter').offset().top);
  });
  clicker('.flip-editors',function() {
    arrangeEditors(localStorage['verticalSplit'] === "false" ? true : false)
  });

  var arrangeEditors = function(vertical) {
    $('.editor-wrapper').toggleClass('vertical',vertical);
    $('.editor').toggleClass('vertical',vertical);
    editors.each(function(editor) {
      editor.resize();
    });
    localStorage['verticalSplit'] = vertical;
  };

  var loadGists = (function() {
    var idMatches = window.location.search.match(/gist=(\d*)/);
    if(idMatches) {
      $.getJSON('/gists/'+idMatches[1],function(json) {
        $(function() {
          var specs = '',
              src = '',
              containsCoffee = false;
          _(json.files).each(function(file,name) {
            if(name.indexOf('.coffee') !== -1) {
              containsCoffee = true;
            }

            if(name.match(/spec\.(js|coffee)/)) {
              specs += file.content + '\n';
            } else {
              src += file.content + '\n';
            }
          });
          editors.setMode(containsCoffee? 'coffee' : 'javascript');

          editors.get("specs").getSession().setValue(specs);
          editors.get("src").getSession().setValue(src);

        });
      });
    }
  })();

  var hackAceKeyboardShortcuts = (function() {
    var canon = require('pilot/canon');
    canon.removeCommand("gotoline");
    canon.addCommand({
      name: "donothingsave",
      bindKey: {
        win: 'Ctrl-S',
        mac: 'Command-S',
        sender: 'editor'
      },
      exec: function(env, args, request) {
        tryIt();
      }
    });
  })();

  var StylishReporter = function() {};
  StylishReporter.prototype.reportRunnerStarting = function() {
    $('body').removeClass();
    $('.body-wrap').removeClass('passing-border','failing-border');
  };
  StylishReporter.prototype.reportRunnerResults = function() {
    var passed = $('.runner-wrap .runner').hasClass('passed');
    $('body').toggleClass('passing',passed);
    $('body').toggleClass('failing',!passed);
    $('.body-wrap').toggleClass('passing-border',passed);
    $('.body-wrap').toggleClass('failing-border',!passed);

    $('.runner-notice').html($('.jasmine_reporter .runner .description').text()+' (<a class="scroll-to-results">see results</a>)')
        .toggleClass('passing',passed)
        .toggleClass('failing',!passed);
  };

  if(!window.runningTryJasmineSpecs) {
    $(document).ready(function(){
      $('#specs').codeBox();
      $('#src').codeBox();
      templates.init();
      arrangeEditors(localStorage['verticalSplit'] === "false" ? false : true);
    });
  }
</script>-->
</body>
</html>